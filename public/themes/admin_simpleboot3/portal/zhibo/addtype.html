<include file="public@header"/>
<style type="text/css">
    .pic-list li {
        margin-bottom: 5px;
    }
    .catenames button{ margin-right: 10px; background-color: #abbac3; color: #fff; margin-top: 3px; margin-bottom: 2px; }
</style>
</head>
<body>
<div class="wrap js-check-wrap">
    <ul class="nav nav-tabs">
        <li><a href="{:url('Zhibo/index')}">直播列表</a></li>
        <li><a href="{:url('Zhibo/addzhibo')}">添加直播</a></li>
        <li><a href="{:url('Zhibo/lubo')}">录播列表</a></li>
        <li><a href="{:url('Zhibo/addlubo')}">添加录播</a></li>
        <li><a href="{:url('Zhibo/yuyue')}">预约列表</a></li>
        <li><a href="{:url('Zhibo/zhibotype')}">直播分类</a></li>
        <li  class="active"><a href="{:url('Zhibo/addtype')}">添加分类</a></li>
    </ul>
    <form class="form-horizontal margin-top-20"  role="form" method="POST" id="add_customer"  enctype="multipart/form-data">
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">直播名称</label>

            <div class="col-sm-6">
                <input type="text" name="course_name" id="course_name" placeholder="请输入课堂名称" class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">直播间ID</label>

            <div class="col-sm-6">
                <input type="text" name="live_room" id="live_room" placeholder="直播间ID" class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">直播时长</label>

            <div class="col-sm-6">
                <input type="text"  name="live_time"  placeholder="直播时长" class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">开播时间</label>
            <div class="col-sm-6">
                <input type="text" autocomplete="off" name="kb_time" placeholder="请输入开播时间" class="form-control js-bootstrap-datetime" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">直播分类</label>
            <div class="col-sm-6">
                <select name="live_cate"  class="form-control">
                    <option value="0">请选择分类</option>
                    <foreach name="live_cate" item="live1">
                        <option value="{$live1.id}">{$live1.classname}</option>
                        <foreach name="live1.subcat" item="live2">
                            <option value="{$live2.parentid},{$live2.id}">------{$live2.classname}</option>
                        </foreach>
                    </foreach>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">课堂照片</label>

            <div class="col-sm-6">
                <input type="file" name="course_img" id="course_img" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">主讲老师</label>

            <div class="col-sm-6">
                <input type="text" name="teacher_name" id="teacher_name" placeholder="请输入主讲老师名称"  class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">讲师密码</label>

            <div class="col-sm-6">
                <input type="text" name="teacher_token" id="teacher_token" placeholder="请输入讲师密码"  class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">助教密码</label>

            <div class="col-sm-6">
                <input type="text" name="assistant_token" id="assistant_token" placeholder="请输入助教密码"  class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">观看密码</label>
            <div class="col-sm-6">
                <input type="text" name="student_token" id="student_token"  placeholder="请输入观看密码" class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">SDK ID</label>

            <div class="col-sm-6">
                <input type="text" name="sdk_id"  id="sdk_id"  placeholder="请输入SDK ID"   class="form-control" />
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">排序</label>
            <div class="col-sm-6">
                <input type="text" name="orderby"  id="orderby"  placeholder="1-10000之间 数值越大越靠前"   class="form-control" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">课程状态</label>
            <div class="col-sm-6">
                <select name="type"  class="form-control">
                    <option value="1">开课中</option>
                    <option value="2">已结束</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">选择班次</label>
            <div class="col-sm-6">
                <input class="form-control" type="text" style="width:400px;" required value=""
                       placeholder="请选择分类" onclick="doSelectCategory();" id="js-categories-name-input"  readonly/>
                        <input class="form-control" type="hidden" value="" name="post[categories]"
                       id="js-categories-id-input"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">选择的班次</label>
            <div class="col-sm-6">
                <div class="col-sm-9 catenames"></div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">添加学员</label>
            <div class="col-sm-6">
                <textarea type="text" name="other_stu" id="other_stu" style="width: 800px;height: 100px"></textarea>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right">直播简介</label>
            <div class="col-sm-6">
                <script type="text/plain" id="content" name="content"></script>
            </div>
        </div>

        <div class="clearfix form-actions">
            <div class="col-md-offset-3 col-md-9">
                <button class="btn btn-info" type="submit">
                    <i class="icon-ok bigger-110"></i>
                    保存
                </button>
                &nbsp;
                <button class="btn" type="reset">
                    <i class="icon-undo bigger-110"></i>
                    重置
                </button>
            </div>
        </div>
    </form>
</div>
<script type="text/javascript" src="__STATIC__/js/admin.js"></script>
<script type="text/javascript">
    //编辑器路径定义
    var editorURL = GV.WEB_ROOT;
</script>
<script type="text/javascript" src="__STATIC__/js/ueditor/ueditor.config.js"></script>
<script type="text/javascript" src="__STATIC__/js/ueditor/ueditor.all.min.js"></script>
<script type="text/javascript">
    $(function () {
        UE.getEditor('content', {initialFrameWidth: 800, initialFrameHeight: 200});
    });

    function doSelectCategory() {
        var selectedCategoriesId = $('#js-categories-id-input').val();
        openIframeLayer("{:url('AdminCategory/select2')}?ids=" + selectedCategoriesId, '请选择分类', {
            area: ['80%', '80%'],
            btn: ['确定', '取消'],
            move: true,
            yes: function (index, layero) {
                //do something

                var iframeWin          = window[layero.find('iframe')[0]['name']];
                var selectedCategories = iframeWin.confirm();
                if (selectedCategories.selectedCategoriesId.length == 0) {
                    layer.msg('请选择分类');
                    return;
                }
                //<button class="btn">直播特训班</button>
                $('#js-categories-id-input').val(selectedCategories.selectedCategoriesId.join(','));
                $('#js-categories-name-input').val(selectedCategories.selectedCategoriesName.join('、'));

                var selectNames = selectedCategories.selectedCategoriesName.join(',');
                var selectIds = selectedCategories.selectedCategoriesId;
                //console.log(selectNames);
                var selectstr = '';
                //alert(selectNames.indexOf(",") != -1);
                if(selectNames.indexOf(",") != -1){
                    var selectArray = selectNames.split(",");
                    for(var i=0;i<selectArray.length;i++){
                        selectstr += '<button type="button" data-id="'+selectIds[i]+'" class="btn">'+selectArray[i]+'</button>';
                    }
                }
                else
                {
                    selectstr = '<button type="button" data-id="'+selectIds+'" class="btn">'+selectNames+'</button>';
                }
                $(".catenames").html(selectstr);
                //console.log(layer.getFrameIndex(index));
                layer.close(index); //如果设定了yes回调，需进行手工关闭
            }
        });
    }
</script>
</body>
</html>